document.getElementById('results').innerHTML = "";

document.querySelector('#results').insertAdjacentHTML("afterbegin", "<%= j (render partial: './partials/results') %>") ;

$(document).ready(function() {
    $(".selectpicker").selectpicker("refresh");

     var arrData=[];

$(document).on('click','.checkBoxClass',function () {
    alert("Checkbox state (method 1) = " +  $(this).prop('checked'));

    if($(this).prop('checked') == true) {
        var gameID = $(this).closest('tr').find('td:eq(1)').text();
        var gameName = $(this).closest('tr').find('td:eq(3)').text();
        var gameReleaseDate = $(this).closest('tr').find('td:eq(4)').text();
        var gamePlatforms = [];
        var gameStores = [];

        $(this).closest('tr').find(".platformSelector option:selected").each(function () {
            var $this = $(this);
            if ($this.length) {
                var newText = $this.text().replace(/[\W_]/g, '');
                var newObj = {};
                newObj.id = $(this).data("object");
                newObj.platform = newText;
                gamePlatforms.push(newObj);
            }
         });

         $(this).closest('tr').find(".storeSelector option:selected").each(function () {
            var $this = $(this);
            if ($this.length) {
                var newText = $this.text().replace(/[\W_]/g, '');
                var newObj = {};
                newObj.id = $(this).data("object");
                newObj.store = newText;
                gameStores.push(newObj);
            }
         });

         console.log(gamePlatforms);
         console.log(gameStores);
        }
    })
});
